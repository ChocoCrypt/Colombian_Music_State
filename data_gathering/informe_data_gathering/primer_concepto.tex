% Created 2021-10-21 Thu 20:26
% Intended LaTeX compiler: pdflatex
\documentclass[11pt]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable}
\usepackage{wrapfig}
\usepackage{rotating}
\usepackage[normalem]{ulem}
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{amssymb}
\usepackage{capt-of}
\usepackage{hyperref}
\author{Rodrigo Castillo, Alejandra Campo, Gran Maestro Chamán.}
\date{\today}
\title{Primer Concepto -Análisis del estado de las bandas musicales en la escena colombiana}
\hypersetup{
 pdfauthor={Rodrigo Castillo, Alejandra Campo, Gran Maestro Chamán.},
 pdftitle={Primer Concepto -Análisis del estado de las bandas musicales en la escena colombiana},
 pdfkeywords={},
 pdfsubject={},
 pdfcreator={Emacs 27.1 (Org mode 9.5)}, 
 pdflang={English}}
\begin{document}

\maketitle
\tableofcontents



\section{Qué base de datos escogieron.}
\label{sec:org349f8b3}
La idea de este proyecto es hacer un análisis del estado de las bandas musicales
en la escena musical colombiana, sin embargo, aunque existen muchas bases de
datos y formas diversas
de recolectar datos sobre música, no existe un dataset sólido sobre la música en
Colombia que cuente con suficientes features para aplicar análisis estadístico
de datos en ellos. La mayoría de las plataformas (como spotify) que cuentan con
una API no dan información sobre la región en donde se encuenta un artista.

Sin embargo, no tiene gracia hacer análisis de datos sobre grandes datasets que
no tienen influencia sobre los miembros del grupo y sobre los cuales ya existen
análisis muy complejos hechos por gente mas experimentada, por lo que el grupo
se dispuso a hacer su propio dataframe de la música en Colombia.

\subsection{Metodología de la recolección de datos sobre bandas en la escena colombiana}
\label{sec:org3df0bc2}
\subsubsection{SIMUS}
\label{sec:org132f07d}
Existen diversos datos sobre bandas colombianas , por ejemplo existe una entidad que se llama el SIMUS en el cuál las bandas musicales que tienen contrataciones tienen que registratse legalmente, esta base de datos cuenta con 882 bandas que se han registrado legalmente.
\begin{verbatim}
import pandas as pd
datos_simus = pd.read_excel("bandas_simus.xls")
print(datos_simus.head(10))
print(datos_simus.shape)
\end{verbatim}

\begin{verbatim}
                                            Nombre                        Tipo Agrupacion      Pais  Departamento       Municipio     Estado
0  Ensamble musical casa de la cultura San Alberto                               Conjunto  COLOMBIA         CESAR     SAN ALBERTO  Publicado
1                 Charlie Rueda & The Jazzmorgans   Agrupaciones de Música Popular Urbana  COLOMBIA     SANTANDER     BUCARAMANGA  Publicado
2                                   Gente pescaito                               Conjunto  COLOMBIA  BOGOTÁ, D.C.    BOGOTÁ, D.C.  Publicado
3                                        los Andes                               Conjunto  COLOMBIA         HUILA         GIGANTE  Publicado
4                       CORO MUNICIPAL DE  MALAMBO                                   Coro  COLOMBIA     ATLÁNTICO         MALAMBO  Publicado
5                                       CORO ATRES                                   Coro  COLOMBIA        NARIÑO         IPIALES  Publicado
6                                      A TRES TRIO                                   Trio  COLOMBIA        NARIÑO         IPIALES  Publicado
7                    CUERPO Y ALMA LATIN ROCK BAND  Agrupaciones de Música Popular Urbana  COLOMBIA         HUILA     SANTA MARÍA  Publicado
8                        banda escuela 16 de julio                                  Banda  COLOMBIA       BOLÍVAR  SAN ESTANISLAO  Publicado
9       gaita casa de la cultura de san estanislao     Agrupaciones de Música Tradicional  COLOMBIA       BOLÍVAR  SAN ESTANISLAO  Publicado
(882, 6)
\end{verbatim}

En esta base de datos cuenta con las columnas:
\begin{itemize}
\item nombre de la banda
\item tipo de agrupación
\item país(todas son colombianas)
\item Departamento del país
\item Municipio
\item Estado de la banda
\end{itemize}
\subsubsection{BOMM (Bogotá Music Market)}
\label{sec:org28476e1}
Existe una revista llamada BOMM es una plataforma de promoción y circulación organizada por la Cámara de Comercio de Bogotá, como parte de su programa de apoyo a las Industrias Creativas y Culturales, en esta página existe un catálogo de las bandas que han participado en eventos en el año 2021 (\url{https://www.bogotamusicmarket.com/Artistas?year=2021}) (no existen mas años y este input es vulnerable a RCE injection por si alguien quiere decirle a los de BOMM).
En BOMM no existe propiamente un Dataset, sin embargo, están todas los artistas inscritos, por lo que se puede hacer un simple programa que los scrapee:
\begin{verbatim}
from selenium import webdriver
import pandas as pd
from time import sleep
#crea una session de un driver de google chrome
driver = webdriver.Chrome()
bomm_artist_url = "https://www.bogotamusicmarket.com/Artistas?year=2021"
driver.get(bomm_artist_url)
#espera 1 segundo para que el driver seguro cargue la página
sleep(1)
not_done = True
bomm_list = []
while(not_done):
    #agarro todos los nombres de una pagina específica
    for i in range(1,17):
        #si no se puede agarrar el elemento es porque no hay mas bandas
        try:
            first_artist = driver.find_element_by_xpath(f"/html/body/div[1]/div/div/div/div[2]/div/div[{i}]/figure/figcaption/h4/a")
            name = first_artist.text
            data = {"band_name":name}
            bomm_list.append(data)
        except:
            not_done = False
            print("done")
            break
    try:
        #voy a la siguiente pagina, y hago esto hasta que no haya mas artistas
        next_button = driver.find_element_by_xpath("/html/body/div[1]/div/div/div/div[3]/div[3]/div/a")
        next_button.click()
        sleep(1)
    except:
        driver.close()

bomm_data = pd.DataFrame(bomm_list)
print(bomm_data)
print(bomm_data.shape())
\end{verbatim}

\begin{verbatim}
done
              band_name
0    8bm - 8bits Memory
1         Ácido Pantera
2          Afro Legends
3    Agrupación Guarura
4             Aka Rezzo
..                  ...
252               Yooko
253               Zafat
254         Zalama Crew
255           Zatélithe
256              Zultan

[257 rows x 1 columns]
\end{verbatim}

\subsubsection{Bandas o cantantes famosos}
\label{sec:org14f8a5f}
Con el fin del proyecto, una de las cosas que se busca analizar es que factores hacen que una banda sea famosa y que otra no , por lo que también añadiré una lista de cantantes muy famosos colombianos al dataset también scrapeado de \url{https://www.ranker.com/list/bands-from-colombia/reference}

\textbf{nota:el script que scrapeo estos datos está en el repositorio pero no se puede llamar desde el notebook pues es un poco mañoso}

\begin{verbatim}
import json
import pandas as pd
with open("famous_data.json") as file:
    data = json.load(file)
famous_dataframe = pd.DataFrame(data)
print(famous_dataframe)
\end{verbatim}

\begin{verbatim}
                      name
0                  Shakira
1                   Juanes
2            Mateo Camargo
3        Alfredo Gutierrez
4            Alex González
..                     ...
100     Gabriel Torregrosa
101       Rafael Rodríguez
102         Fredys Arrieta
103      Alejandro Palacio
104  David Escobar Gallego

[105 rows x 1 columns]
\end{verbatim}

\subsubsection{Sin embargo, lo que se pretende con estos datos es extraer solamente los nombres de las bandas activas en la escena colombiana, pues, posteriormente, a partir de estas bandas se obtendrá la información de spotify, por lo que unificaré los datos.}
\label{sec:org0d35cac}

\begin{verbatim}
import pandas as pd

colombia_scene_list = []
for i in famous_dataframe["name"]:
    data = {"name":i,
            "font":"famous"}
    colombia_scene_list.append(data)

for i in bomm_data["band_name"]:
    data = {"name":i,
            "font":"bomm"}
    colombia_scene_list.append(data)

for i in datos_simus["Nombre"]:
    data = {"name":i,
            "font":"simus"}
    colombia_scene_list.append(data)

colombia_state_names = pd.DataFrame(colombia_scene_list)
print(colombia_state_names)

\end{verbatim}

\begin{verbatim}
                                                   name    font
0                                               Shakira  famous
1                                                Juanes  famous
2                                         Mateo Camargo  famous
3                                     Alfredo Gutierrez  famous
4                                         Alex González  famous
...                                                 ...     ...
1239  Semillero escuela Municipal de música de Piendamó   simus
1240                   Chirimia del Pacifico Colombiano   simus
1241            ESCUELA DE FORMACION MUSICAL PAEZ VIVE    simus
1242                                   Pal' Lereo Pabla   simus
1243                                       Mar a fuera    simus

[1244 rows x 2 columns]
\end{verbatim}

\subsection{Merge con Spotify:}
\label{sec:org9023061}
\end{document}
